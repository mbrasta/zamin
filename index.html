<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>ุฒูุฒููโูุง ุงุฎุฑ ุงุฑุงู</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: 'Vazir', sans-serif;
      background-color: #121212;
      color: #e0e0e0;
      text-align: center;
      padding: 20px;
      direction: rtl;
    }
    h1 {
      color: #bb86fc;
    }
    #globe {
      width: 100%;
      height: 600px;
      margin: 20px auto;
    }
    .buttons button {
      background-color: #3700b3;
      color: #fff;
      padding: 10px 20px;
      margin: 8px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }
    .buttons button:hover {
      background-color: #6200ea;
    }
    .impact-box {
      background-color: #1e1e1e;
      padding: 20px;
      margin-top: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      text-align: right;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>
<body>

  <h1>ุฒูุฒููโูุง ุงุฎุฑ ุงุฑุงู + ุดุจูโุณุงุฒ ุชุฃุซุฑุงุช</h1>

  <div class="buttons">
    <button onclick="loadEarthquakes()">ููุงุด ุฒูุฒููโูุง ุงุฎุฑ ุงุฑุงู</button>
    <button onclick="showImpact(5)">ต ุฑุดุชุฑ</button>
    <button onclick="showImpact(6)">ถ ุฑุดุชุฑ</button>
    <button onclick="showImpact(7)">ท ุฑุดุชุฑ</button>
    <button onclick="showImpact(8)">ธ ุฑุดุชุฑ</button>
    <button onclick="showImpact(9)">น ุฑุดุชุฑ</button>
    <button onclick="showImpact(10)">ฑฐ ุฑุดุชุฑ</button>
  </div>

  <div id="globe">ุจุฑุง ููุงุด ุฒูุฒููโูุงุ ุฏฺฉูู ุจุงูุง ุฑุง ูุดุงุฑ ุฏูุฏ.</div>

  <div class="impact-box" id="impact-box">
    ูุทูุงู ุดุฏุช ุฒูุฒูู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ ุชุง ุชุฃุซุฑ ุขู ููุงุด ุฏุงุฏู ุดูุฏ.
  </div>

  <script>
    const impactText = {
      5: "๐ ุฒูุฒูู ต ุฑุดุชุฑ:\n - ุงุญุณุงุณ ูโุดูุฏุ ุงูุง ูุนูููุงู ุฎุณุงุฑุช ุฌุฏ ูุงุฑุฏ ููโฺฉูุฏ.",
      6: "โ๏ธ ุฒูุฒูู ถ ุฑุดุชุฑ:\n - ุฎุณุงุฑุงุช ูุชูุณุท ุจู ุณุงุฎุชูุงูโูุงุ ูุฑุฒุด ุดุฏุฏุชุฑ ุญุณ ูโุดูุฏ.",
      7: "๐จ ุฒูุฒูู ท ุฑุดุชุฑ:\n - ุชุฎุฑุจ ฺฏุณุชุฑุฏู ุฏุฑ ููุงุทู ูุฒุฏฺฉุ ุฎุทุฑ ุจุฑุง ุฌุงู ุงูุณุงูโูุง.",
      8: "๐ฅ ุฒูุฒูู ธ ุฑุดุชุฑ:\n - ูุฑุงู ุณูฺฏู ุฏุฑ ุณุทุญ ูุณุนุ ุฒุฑุณุงุฎุชโูุง ุจูโุดุฏุช ุขุณุจ ูโุจููุฏ.",
      9: "๐ ุฒูุฒูู น ุฑุดุชุฑ:\n - ฺฉ ูุงุฌุนู ุงูุณุงู ู ุฒุณุชโูุญุท ุนุธูุ ุงุญุชูุงู ุณููุงู ุจุณุงุฑ ุฒุงุฏ.",
      10: "โ๏ธ ุฒูุฒูู ฑฐ ุฑุดุชุฑ:\n - ูุงุจูุฏ ฺฉุงูู ููุงุทู ูุณุนุ ุชุบุฑ ุดฺฉู ุฒููุ ุขุณุจ ุดุฏุฏ ุจู ฺฉุฑู ุฒูู."
    };

    function showImpact(mag) {
      document.getElementById('impact-box').innerHTML =
        `<strong>${impactText[mag].replace(/\n/g, "<br>")}</strong>`;
    }

    function loadEarthquakes() {
      document.getElementById('globe').innerHTML = "โณ ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ุงุทูุงุนุงุช ุฒูุฒููโูุง...";

      fetch('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson')
        .then(res => res.json())
        .then(data => {
          const features = data.features.filter(f => f.properties.place.includes('Iran'));

          if (features.length === 0) {
            document.getElementById('globe').innerHTML = "โ ูฺ ุฒูุฒููโุง ุฏุฑ ุงุฑุงู ุฏุฑ ููุชู ฺฏุฐุดุชู ฺฏุฒุงุฑุด ูุดุฏู.";
            return;
          }

          const lats = features.map(f => f.geometry.coordinates[1]);
          const lons = features.map(f => f.geometry.coordinates[0]);
          const mags = features.map(f => f.properties.mag);
          const texts = features.map(f =>
            `๐ ${f.properties.place}<br>ุดุฏุช: ${f.properties.mag}<br>ุฒูุงู: ${new Date(f.properties.time).toLocaleString('fa-IR')}`
          );

          Plotly.newPlot('globe', [{
            type: 'scattergeo',
            mode: 'markers',
            lat: lats,
            lon: lons,
            text: texts,
            hoverinfo: 'text',
            marker: {
              size: mags.map(m => m * 3),
              color: mags,
              colorscale: 'Reds',
              showscale: true
            }
          }], {
            geo: {
              projection: { type: 'orthographic' },
              showland: true,
              landcolor: 'green',
              showocean: true,
              oceancolor: 'lightblue',
              lataxis: { range: [10, 45] },
              lonaxis: { range: [40, 65] }
            },
            title: 'ุฒูุฒููโูุง ุงุฎุฑ ุฏุฑ ุงุฑุงู'
          });
        })
        .catch(err => {
          document.getElementById('globe').innerHTML = "โ ุฎุทุง ุฏุฑ ุฏุฑุงูุช ุงุทูุงุนุงุช ุฒูุฒูู.";
          console.error(err);
        });
    }
  </script>

</body>
</html>
